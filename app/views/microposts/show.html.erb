<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="card col-10">
      <span class="card-title">
        <%= link_to @micropost.user.name, @micropost.user %>
      </span>
      <span class="card-text">
        <%= @micropost.content %>
        <%= image_tag @micropost.display_image if @micropost.image.attached? %>
      </span>
      <div class="row d-flex justify-content-center">
        <div class="like_button col-3">
          <%= render "likes/like", micropost: @micropost %>
        </div>
        <div class="col-3"></div>
        <div class="delete_button col-3">
          <% if current_user?(@micropost.user) %>
            <%= link_to "削除", @micropost, method: :delete, data: { confirm: "本当に削除しますか？" } %>
          <% end %>
        </div>
        <div class="timestamp col-3">
          <%= time_ago_in_words(@micropost.created_at) %>前
        </div>
      </div>
      <ul class="list-group list-group-flush">
        <% if @comments.any? %>
          <li class="list-group-item">
            <% @comments.each do |comment| %>
              <%= link_to comment.user.name, comment.user %>
              <%= comment.content %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
    <div id="comment-form" class="card col-10 pt-3">
      <%= form_with(model: [@micropost, @comment], class: "form-group", local: true) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>

        <%= f.text_area :content, class: "form-control", id: "content", placeholder: "コメントを記入してください" %>
        <%= f.submit "コメントする", class: "btn btn-primary mt-2" %>
      <% end %>
    </div>
  </div>
</div>
